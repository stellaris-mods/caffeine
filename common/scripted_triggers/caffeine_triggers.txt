has_any_science_lab = {
	OR = {
		has_building = "building_basic_science_lab_1"
		has_building = "building_physics_lab_1"
		has_building = "building_physics_lab_2"
		has_building = "building_physics_lab_3"
		has_building = "building_physics_lab_4"
		has_building = "building_biolab_1"
		has_building = "building_biolab_2"
		has_building = "building_biolab_3"
		has_building = "building_biolab_4"
		has_building = "building_engineering_facility_1"
		has_building = "building_engineering_facility_2"
		has_building = "building_engineering_facility_3"
		has_building = "building_engineering_facility_4"
		# XXX Add in buildings from NSC and other common ones
	}
}

caffeine_valid_survey_location = {
	OR = {
		is_surveyed = { who = FROM status = no }
		any_planet = { is_surveyed = { who = FROM status = no } }
	}
	# No hostile ship in system
	NOT = {
		any_ship_in_system = {
			exists = owner
			owner = { is_hostile = FROM }
		}
	}
	has_access_fleet = FROM
	# Anyone doing a survey here already maybe?
	NOT = {
		any_ship_in_system = {
			exists = owner
			owner = { is_same_value = FROM }
			is_ship_class = shipclass_science_ship
			exists = leader
			fleet = {
				OR = {
					has_fleet_order = survey_planet_order
					has_fleet_order = auto_explore_order
					has_fleet_order = move_to_system_point_order
				}
			}
		}
	}
}
